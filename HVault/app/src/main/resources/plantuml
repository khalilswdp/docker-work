@startuml
skinparam packageStyle rectangle
skinparam classAttributeIconSize 0

package "Core" {

  ' ===== Shared foundation inside Core =====
  class GilBaseException
  abstract class GilEngineException

  class GilCodedException
  enum GilErrorCode

  GilBaseException <|-- GilEngineException
  GilBaseException <|-- GilCodedException
  GilCodedException --> GilErrorCode

  ' ===== Configuration taxonomy =====
  package "Configuration Taxonomy" {
    abstract class GilConfigurationException

    class ConfigurationMissingException
    class ConfigurationMalformedException
    class ConfigurationConstraintViolationException
    class ConfigurationReferenceNotFoundException

    GilEngineException <|-- GilConfigurationException
    GilConfigurationException <|-- ConfigurationMissingException
    GilConfigurationException <|-- ConfigurationMalformedException
    GilConfigurationException <|-- ConfigurationConstraintViolationException
    GilConfigurationException <|-- ConfigurationReferenceNotFoundException
  }

  ' ===== Flow & Data Processing taxonomy =====
  package "Flow & Data Taxonomy" {
    abstract class GilFlowException

    class InvalidPayloadException
    class FlowIdResolutionException
    class FieldAliasingException
    class TransformationExecutionException

    GilEngineException <|-- GilFlowException
    GilFlowException <|-- InvalidPayloadException
    GilFlowException <|-- FlowIdResolutionException
    GilFlowException <|-- FieldAliasingException
    GilFlowException <|-- TransformationExecutionException
  }
}

package "API Common" {
  enum ApiError

  class ClientException
  class BadRequestException
  class UnauthorizedException
  class ForbiddenException
  class ConflictException
  class NotFoundException

  class ServerException

  GilBaseException <|-- ClientException
  GilBaseException <|-- ServerException

  ClientException <|-- BadRequestException
  ClientException <|-- UnauthorizedException
  ClientException <|-- ForbiddenException
  ClientException <|-- ConflictException
  ClientException <|-- NotFoundException
}

package "Identity" {
  class IdentityException
  class TokenVerificationException
  class TokenExpiredException
  class TokenDecodeException
  class InvalidSignatureException
  class InvalidClaimException
  class JsonWebKeyException
  class CodeExchangeException
  class InvalidConfigurationException

  GilBaseException <|-- IdentityException

  IdentityException <|-- TokenVerificationException
  TokenVerificationException <|-- TokenExpiredException
  TokenVerificationException <|-- TokenDecodeException
  TokenVerificationException <|-- InvalidSignatureException
  TokenVerificationException <|-- InvalidClaimException
  TokenVerificationException <|-- JsonWebKeyException

  IdentityException <|-- CodeExchangeException
  IdentityException <|-- InvalidConfigurationException
}

@enduml
